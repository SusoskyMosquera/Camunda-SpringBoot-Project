<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mis Tareas</title>
    <link href="/css/cormacarena.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container py-5">
    <h3>Tareas Pendientes para: <span th:text="${radicadoId}" class="text-success"></span></h3>

    <div class="alert alert-warning mt-4" th:if="${#lists.isEmpty(tareas)}">
        Su trámite está siendo gestionado internamente. Por favor espere notificación.
    </div>

    <div class="card mt-4 shadow-sm" th:each="tarea : ${tareas}">
        <div class="card-header bg-success text-white fw-bold" th:text="${tarea.name}"></div>
        <div class="card-body">
            <form action="/completar-tarea-cliente" method="post">
                <input type="hidden" name="taskId" th:value="${tarea.id}">
                <input type="hidden" name="radicadoId" th:value="${radicadoId}">

                <div th:if="${tarea.taskDefinitionKey == 'Activity_1z0fd82' or tarea.taskDefinitionKey == 'Activity_1ocl18k'}">
                    <p>Por favor realice el pago y adjunte la referencia.</p>
                    <label class="form-label">Referencia de Pago:</label>
                    <input type="text" name="ReferenciaPago" class="form-control mb-3" required>
                    <button class="btn btn-primary">Confirmar Pago</button>
                </div>

                <div th:if="${tarea.taskDefinitionKey == 'Activity_197ohxs'}">
                    <p class="text-danger">Su solicitud fue devuelta. Por favor corrija la información.</p>
                    <label>Nombre Solicitante (Corregir):</label>
                    <input type="text" name="nombreSolicitante" class="form-control mb-2">
                    <button class="btn btn-warning">Corregir y Reenviar</button>
                </div>

                <div th:unless="${tarea.taskDefinitionKey == 'Activity_1z0fd82' or tarea.taskDefinitionKey == 'Activity_1ocl18k' or tarea.taskDefinitionKey == 'Activity_197ohxs'}">
                    <p>Se requiere su acción para continuar.</p>
                    <button class="btn btn-primary">Confirmar y Continuar</button>
                </div>

            </form>
        </div>
    </div>
    <a href="/" class="btn btn-link mt-3">Volver</a>
</div>
</body>
</html>