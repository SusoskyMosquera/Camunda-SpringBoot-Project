<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="defaultForm">
    <div class="alert alert-secondary small">
        <strong>Datos del Proceso:</strong>
        <ul>
            <li th:each="var : ${tarea.vars}" th:if="${var.value.value != null}">
                <strong th:text="${var.key}"></strong>: <span th:text="${var.value.value}"></span>
            </li>
        </ul>
    </div>
    <p class="text-muted">Confirme para completar la tarea.</p>
    <button type="submit" class="btn btn-primary w-100">Completar</button>
</div>

<div th:fragment="Activity_04cs59r">
    <div class="card bg-light mb-3">
        <div class="card-header fw-bold text-success"><i class="fas fa-list-alt me-2"></i>Detalle de la Solicitud</div>
        <div class="card-body small">
            <div class="row">
                <div class="col-12 border-bottom pb-2 mb-2 text-muted fw-bold">Informaci√≥n del Solicitante</div>
                <div class="col-md-6 mb-1"><strong>Raz√≥n Social:</strong> <span th:text="${tarea.vars['nombreSolicitante']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>ID:</strong> <span th:text="${tarea.vars['tipoIdentificacion']?.value} + ' ' + ${tarea.vars['idSolicitante']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Email:</strong> <span th:text="${tarea.vars['email']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Tel√©fono:</strong> <span th:text="${tarea.vars['telefono']?.value}"></span></div>
                <div class="col-12 mb-1"><strong>Direcci√≥n:</strong> <span th:text="${tarea.vars['direccionResidencia']?.value}"></span></div>

                <div class="col-12 border-bottom pb-2 mb-2 mt-3 text-muted fw-bold">Informaci√≥n del Proyecto</div>
                <div class="col-12 mb-1"><strong>Proyecto:</strong> <span th:text="${tarea.vars['nombreProyecto']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Sector:</strong> <span th:text="${tarea.vars['sectorProyecto']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Valor:</strong> $<span th:text="${tarea.vars['valorProyecto']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Ubicaci√≥n:</strong> <span th:text="${tarea.vars['municipioProyecto']?.value} + ', ' + ${tarea.vars['departamentoProyecto']?.value}"></span></div>

                <div class="col-12 mt-2 bg-white p-2 rounded border">
                    <strong>üìÇ Soporte EIA:</strong> <span th:text="${tarea.vars['nombreSoporteEIA']?.value}" class="text-primary"></span>
                </div>
            </div>
        </div>
    </div>

    <label class="fw-bold">Observaciones / Motivo de Devoluci√≥n</label>
    <textarea name="observacionDatosIniciales" class="form-control mb-3" placeholder="Si devuelve la solicitud, explique aqu√≠ las correcciones necesarias..."></textarea>

    <div class="d-grid gap-2">
        <button type="submit" name="solicitudValida" value="true" class="btn btn-success">‚úÖ Datos Correctos</button>
        <button type="submit" name="solicitudValida" value="false" class="btn btn-danger">‚ùå Datos Incorrectos (Devolver)</button>
    </div>
</div>

<div th:fragment="Activity_0mt96ax">
    <div class="alert alert-info small mb-3">
        <strong>Proyecto:</strong> <span th:text="${tarea.vars['nombreProyecto']?.value}"></span><br>
        <strong>Municipio:</strong> <span th:text="${tarea.vars['municipioProyecto']?.value}"></span>
    </div>
    <label class="fw-bold">Profesional Encargado</label>
    <select name="profesionalAsignado" class="form-select mb-3">
        <option value="Pedro P√©rez (Bi√≥logo)">Pedro P√©rez (Bi√≥logo)</option>
        <option value="Ana Garc√≠a (Ing. Ambiental)">Ana Garc√≠a (Ing. Ambiental)</option>
        <option value="Carlos Ruiz (Ge√≥logo)">Carlos Ruiz (Ge√≥logo)</option>
    </select>
    <button type="submit" class="btn btn-primary w-100">Asignar</button>
</div>

<div th:fragment="Activity_1dwso6r">
    <div class="card bg-light mb-3">
        <div class="card-body small">
            <strong>Ubicaci√≥n:</strong> <span th:text="${tarea.vars['municipioProyecto']?.value}"></span> - <span th:text="${tarea.vars['direccionResidencia']?.value}"></span><br>
            <strong>Profesional Asignado:</strong> <span th:text="${tarea.vars['profesionalAsignado']?.value}"></span>
        </div>
    </div>

    <label class="fw-bold">Lugar Visitado</label>
    <input type="text" name="LugarVisita" class="form-control mb-2" required>
    <label class="fw-bold">Fecha Realizaci√≥n</label>
    <input type="date" name="FechaVisita" class="form-control mb-2" required>
    <label class="fw-bold">Concepto Preliminar</label>
    <textarea name="Observaciones" class="form-control mb-3"></textarea>
    <div class="d-grid gap-2">
        <button type="submit" name="TodoCorrecto" value="true" class="btn btn-success">üëç Concepto Favorable</button>
        <button type="submit" name="TodoCorrecto" value="false" class="btn btn-danger">üëé Desfavorable (Rechazar)</button>
    </div>
</div>

<div th:fragment="Activity_0qtkyf2">
    <label class="fw-bold">Dictamen T√©cnico Detallado</label>
    <textarea name="dictamenTecnico" class="form-control mb-3" rows="5" placeholder="Conclusiones de la evaluaci√≥n ambiental..."></textarea>
    <button type="submit" class="btn btn-primary w-100">Radicar Concepto</button>
</div>

<div th:fragment="Activity_0vzruom">
    <div class="card bg-white border-primary mb-3 text-center">
        <div class="card-body">
            <small class="text-muted">Referencia reportada por el ciudadano:</small>
            <h4 class="text-primary my-2" th:text="${tarea.vars['ReferenciaPagoLicencia']?.value}">Sin referencia</h4>
            <span class="badge bg-success">Valor a verificar: 5.000.000 (Simulado)</span>
        </div>
    </div>
    <label class="fw-bold">¬øPago verificado en bancos?</label>
    <div class="d-grid gap-2 mt-2">
        <button type="submit" name="PagoCorrecto" value="true" class="btn btn-success">üí∞ Pago Recibido</button>
        <button type="submit" name="PagoCorrecto" value="false" class="btn btn-danger">üö´ No Pag√≥ (Rechazar)</button>
    </div>
</div>

<div th:fragment="Activity_1gpd4pm">
    <div class="alert alert-secondary small">
        Base Legal: Ley 99 de 1993.<br>
        Solicitante: <span th:text="${tarea.vars['nombreSolicitante']?.value}"></span>
    </div>
    <label class="fw-bold">Texto de la Resoluci√≥n</label>
    <textarea name="textoResolucion" class="form-control mb-3" rows="4">Resuelve: Otorgar Licencia Ambiental para el proyecto...</textarea>
    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="resolucionTramiteCompleto" value="true" checked>
        <label class="form-check-label">Tr√°mite Legal Completo</label>
    </div>
    <button type="submit" class="btn btn-dark w-100">Emitir Resoluci√≥n</button>
</div>

<div th:fragment="Activity_0zhmpvm">
    <div class="alert alert-warning">
        Est√° a punto de otorgar licencia ambiental al proyecto:
        <strong th:text="${tarea.vars['nombreProyecto']?.value}"></strong>.
    </div>
    <label class="fw-bold">N√∫mero de Radicado Final (VITAL)</label>
    <input type="text" name="RadicadoLicencia" class="form-control mb-3" placeholder="Ej: CORMA-LIC-2025-001" required>
    <button type="submit" class="btn btn-success w-100">‚úíÔ∏è Firmar y Otorgar</button>
</div>

<!-- SANCIONATORIO AMBIENTAL -->
<div th:fragment="Activity_1kmxdrx">
    <div class="mb-3">
        <label class="fw-bold">Fecha de elaboraci√≥n *</label>
        <input type="datetime-local" name="fechaActoAdministrativo" class="form-control"
               th:value="${tarea.vars['fechaActoAdministrativo']?.value}" required>
    </div>
    <div class="mb-3">
        <label class="fw-bold">Profesional encargado *</label>
        <input type="text" name="profesionalActoAdministrativo" class="form-control"
               th:value="${tarea.vars['profesionalActoAdministrativo']?.value}" placeholder="Nombre completo" required>
    </div>
    <div class="mb-3">
        <label class="fw-bold">Descripci√≥n del acto administrativo *</label>
        <textarea name="descripcionActoAdministrativo" class="form-control" rows="4" required
                  th:text="${tarea.vars['descripcionActoAdministrativo']?.value}"></textarea>
    </div>
    <button type="submit" class="btn btn-primary w-100">Guardar acto administrativo</button>
</div>

<div th:fragment="Activity_0yrmz41">
    <div class="row g-3">
        <div class="col-12">
            <label class="fw-bold">Fecha de resoluci√≥n *</label>
            <input type="datetime-local" name="fechaResolucion" class="form-control"
                   th:value="${tarea.vars['fechaResolucion']?.value}" required>
        </div>
        <div class="col-md-6">
            <label class="fw-bold">Profesional encargado</label>
            <input type="text" class="form-control" name="profesionalActoAdministrativo"
                   th:value="${tarea.vars['profesionalActoAdministrativo']?.value}" readonly>
        </div>
        <div class="col-md-6">
            <label class="fw-bold">Descripci√≥n original</label>
            <textarea class="form-control" rows="1" readonly
                      th:text="${tarea.vars['descripcionActoAdministrativo']?.value}"></textarea>
        </div>
        <div class="col-12">
            <label class="fw-bold">Tipo de resoluci√≥n *</label>
            <select name="tipoResolucion" class="form-select" required>
                <option value="" th:selected="${tarea.vars['tipoResolucion'] == null}">Seleccione...</option>
                <option value="aprobado" th:selected="${tarea.vars['tipoResolucion']?.value == 'aprobado'}">Aprobado</option>
                <option value="corregirDetalles" th:selected="${tarea.vars['tipoResolucion']?.value == 'corregirDetalles'}">Corregir detalles</option>
            </select>
        </div>
        <div class="col-12">
            <label class="fw-bold">Descripci√≥n de la resoluci√≥n *</label>
            <textarea name="DescripcionResolucion" class="form-control" rows="4" required
                      th:text="${tarea.vars['DescripcionResolucion']?.value}"></textarea>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-success w-100">Registrar resoluci√≥n</button>
        </div>
    </div>
</div>

<div th:fragment="Activity_0v8jnti">
    <div class="row g-3">
        <div class="col-12">
            <label class="fw-bold">Fecha de la radicaci√≥n de la denuncia *</label>
            <input type="date" name="fechaRadicacion" class="form-control" required>
        </div>
        <div class="col-12">
            <label class="fw-bold">Encargado de la denuncia *</label>
            <input type="text" name="encargadoDenuncia" class="form-control" placeholder="Nombre completo" required>
        </div>
        <div class="col-md-6">
            <label class="fw-bold">Nombres del denunciante</label>
            <input type="text" class="form-control" th:value="${tarea.vars['nombresDenunciante']?.value}" readonly>
        </div>
        <div class="col-md-6">
            <label class="fw-bold">Apellidos del denunciante</label>
            <input type="text" class="form-control" th:value="${tarea.vars['apellidosDenunciante']?.value}" readonly>
        </div>
        <div class="col-12">
            <label class="fw-bold">Correo del denunciante</label>
            <input type="email" class="form-control" th:value="${tarea.vars['correoDenunciante']?.value}" readonly>
        </div>
        <div class="col-12">
            <label class="fw-bold">Descripci√≥n de la denuncia</label>
            <textarea class="form-control" rows="3" readonly th:text="${tarea.vars['descripcionDenuncia']?.value}"></textarea>
        </div>
        <div class="col-12">
            <label class="fw-bold d-block">¬øEs en flagrancia? *</label>
            <div class="d-flex gap-4">
                <div class="form-check">
                    <input class="form-check-input" type="radio" th:id="'flagrancia-si-' + ${tarea.id}" name="flagrancia" value="si"
                           th:checked="${tarea.vars['flagrancia']?.value == 'si'}">
                    <label class="form-check-label" th:for="'flagrancia-si-' + ${tarea.id}">S√≠</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" th:id="'flagrancia-no-' + ${tarea.id}" name="flagrancia" value="no"
                           th:checked="${tarea.vars['flagrancia']?.value != 'si'}" required>
                    <label class="form-check-label" th:for="'flagrancia-no-' + ${tarea.id}">No</label>
                </div>
            </div>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-success w-100">Radicar denuncia</button>
        </div>
    </div>
</div>

<div th:fragment="Activity_0aqdeas">
    <label class="fw-bold">Nombre del infractor</label>
    <input type="text" name="nombreInfractor" class="form-control mb-3" th:value="${tarea.vars['nombreInfractor']?.value}" required>
    <label class="fw-bold">Tipo de infracci√≥n</label>
    <input type="text" name="tipoInfraccion" class="form-control mb-3" placeholder="Multa, demolici√≥n, compensaci√≥n..." required>
    <label class="fw-bold">Valor base ($)</label>
    <input type="number" name="valorInfraccionBase" class="form-control mb-3" min="0" step="10000" required>
    <button type="submit" class="btn btn-primary w-100">Guardar valor</button>
</div>

<div th:fragment="Activity_0sw7kwk">
    <label class="fw-bold">Fecha de la visita t√©cnica</label>
    <input type="date" name="fechaVisitaTecnica" class="form-control mb-3" required>
    <label class="fw-bold">Descripci√≥n de la visita</label>
    <textarea name="descripcionVisitaTecnica" class="form-control mb-3" rows="3" required></textarea>
    <label class="fw-bold">Encargado de la visita</label>
    <input type="text" name="encargadoVisitaTecnica" class="form-control mb-3" required>
    <label class="fw-bold">¬øSe evidenci√≥ infracci√≥n?</label>
    <div class="d-flex gap-3 mb-4">
        <div class="form-check">
            <input class="form-check-input" type="radio" th:id="'infraccion-si-' + ${tarea.id}" name="infraccion" value="true" required>
            <label class="form-check-label" th:for="'infraccion-si-' + ${tarea.id}">S√≠</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" th:id="'infraccion-no-' + ${tarea.id}" name="infraccion" value="false" required>
            <label class="form-check-label" th:for="'infraccion-no-' + ${tarea.id}">No</label>
        </div>
    </div>
    <button type="submit" class="btn btn-success w-100">Registrar visita</button>
</div>

<div th:fragment="Activity_1232Cone">
    <div class="alert alert-light border small">
        <strong>Visita t√©cnica:</strong>
        <span th:text="${tarea.vars['descripcionVisitaTecnica']?.value ?: '‚Äî'}"></span>
    </div>
    <label class="fw-bold">Fecha del concepto t√©cnico</label>
    <input type="datetime-local" name="fechaConceptoTecnico" class="form-control mb-3" required>
    <label class="fw-bold">Razones de la infracci√≥n</label>
    <textarea name="razonesInfraccion" class="form-control mb-3" rows="3" required></textarea>
    <button type="submit" class="btn btn-primary w-100">Guardar concepto</button>
</div>

<div th:fragment="Activity_0dtdoio">
    <div class="alert alert-info small">
        <strong>Visita t√©cnica:</strong>
        <span th:text="${tarea.vars['fechaVisitaTecnica']?.value ?: '‚Äî'}"></span><br>
        <strong>Encargado:</strong>
        <span th:text="${tarea.vars['encargadoVisitaTecnica']?.value ?: '‚Äî'}"></span>
    </div>
    <label class="fw-bold">Fecha de creaci√≥n del informe</label>
    <input type="datetime-local" name="fechaCreacionInformeTecnico" class="form-control mb-3" required>
    <label class="fw-bold">Razones por las que no se cometi√≥ el delito</label>
    <textarea name="razonesNoCometerDelito" class="form-control mb-3" rows="3" required></textarea>
    <button type="submit" class="btn btn-success w-100">Enviar informe</button>
</div>

<div th:fragment="Activity_0batq4k">
    <p class="text-muted small">Completa los datos de la atenci√≥n en flagrancia.</p>
    <label class="fw-bold">Descripci√≥n de la visita</label>
    <textarea name="descripcionVisitaTecnica" class="form-control mb-3" rows="3" required></textarea>
    <label class="fw-bold">Encargado de la visita</label>
    <input type="text" name="encargadoVisitaTecnica" class="form-control mb-3" required>
    <button type="submit" class="btn btn-danger w-100">Registrar flagrancia</button>
</div>

<div th:fragment="Activity_0l5a265">
    <label class="fw-bold">Nombre del infractor</label>
    <input type="text" name="nombreInfractor" class="form-control mb-3" th:value="${tarea.vars['nombreInfractor']?.value}" required>
    <label class="fw-bold">¬øEs culpable?</label>
    <div class="d-flex gap-3 mb-3">
        <div class="form-check">
            <input class="form-check-input" type="radio" th:id="'culpable-si-' + ${tarea.id}" name="culpable" value="true" required>
            <label class="form-check-label" th:for="'culpable-si-' + ${tarea.id}">S√≠</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" th:id="'culpable-no-' + ${tarea.id}" name="culpable" value="false" required>
            <label class="form-check-label" th:for="'culpable-no-' + ${tarea.id}">No</label>
        </div>
    </div>
    <label class="fw-bold">Conclusiones</label>
    <textarea name="descripcionConclusiones" class="form-control mb-3" rows="3" required></textarea>
    <button type="submit" class="btn btn-primary w-100">Enviar concepto</button>
</div>

<div th:fragment="Activity_1xnfbt3">
    <label class="fw-bold">Fecha de formulaci√≥n de cargos</label>
    <input type="datetime-local" name="fechaFormulacionCargos" class="form-control mb-3" required>
    <label class="fw-bold">Nombre del infractor</label>
    <input type="text" name="nombreInfractor" class="form-control mb-3" th:value="${tarea.vars['nombreInfractor']?.value}" required>
    <label class="fw-bold">Detalle de los cargos</label>
    <textarea name="DescripcionFormulacionCargos" class="form-control mb-3" rows="4" required></textarea>
    <button type="submit" class="btn btn-warning w-100">Formular cargos</button>
</div>

<div th:fragment="Activity_0xrka9p">
    <label class="fw-bold">Nombre del infractor</label>
    <input type="text" name="nombreInfractor" class="form-control mb-3" th:value="${tarea.vars['nombreInfractor']?.value}" required>
    <label class="fw-bold">Tipo de recurso que presenta</label>
    <select name="tipoRecursoReposicion" class="form-select mb-3" required>
        <option value="">Seleccione una opci√≥n</option>
        <option value="Exoneraci√≥n">Exoneraci√≥n</option>
        <option value="Disminuci√≥n">Disminuci√≥n</option>
        <option value="No">No presenta</option>
    </select>
    <button type="submit" class="btn btn-primary w-100">Registrar decisi√≥n</button>
</div>

<div th:fragment="Activity_1u8j2ux">
    <label class="fw-bold">Porcentaje de disminuci√≥n (%)</label>
    <input type="number" name="porcentajeDisminuicion" class="form-control mb-3" min="0" max="100" required>
    <button type="submit" class="btn btn-success w-100">Aplicar porcentaje</button>
</div>

<div th:fragment="Activity_10rhcun">
    <p class="text-muted small">Confirma si el infractor present√≥ recursos de reposici√≥n.</p>
    <div class="d-flex gap-3 mb-4">
        <div class="form-check">
            <input class="form-check-input" type="radio" th:id="'recursos-si-' + ${tarea.id}" name="recursos" value="true" required>
            <label class="form-check-label" th:for="'recursos-si-' + ${tarea.id}">S√≠ present√≥</label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" th:id="'recursos-no-' + ${tarea.id}" name="recursos" value="false" required>
            <label class="form-check-label" th:for="'recursos-no-' + ${tarea.id}">No present√≥</label>
        </div>
    </div>
    <button type="submit" class="btn btn-primary w-100">Registrar respuesta</button>
</div>

</body>
</html>