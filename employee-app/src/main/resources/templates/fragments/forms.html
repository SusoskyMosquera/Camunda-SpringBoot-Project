<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="defaultForm">
    <div class="alert alert-secondary small">
        <strong>Datos del Proceso:</strong>
        <ul>
            <li th:each="var : ${tarea.vars}" th:if="${var.value.value != null}">
                <strong th:text="${var.key}"></strong>: <span th:text="${var.value.value}"></span>
            </li>
        </ul>
    </div>
    <p class="text-muted">Confirme para completar la tarea.</p>
    <button type="submit" class="btn btn-primary w-100">Completar</button>
</div>

<div th:fragment="Activity_04cs59r">
    <div class="card bg-light mb-3">
        <div class="card-header fw-bold text-success"><i class="fas fa-list-alt me-2"></i>Detalle de la Solicitud</div>
        <div class="card-body small">
            <div class="row">
                <div class="col-12 border-bottom pb-2 mb-2 text-muted fw-bold">Informaci√≥n del Solicitante</div>
                <div class="col-md-6 mb-1"><strong>Raz√≥n Social:</strong> <span th:text="${tarea.vars['nombreSolicitante']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>ID:</strong> <span th:text="${tarea.vars['tipoIdentificacion']?.value} + ' ' + ${tarea.vars['idSolicitante']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Email:</strong> <span th:text="${tarea.vars['email']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Tel√©fono:</strong> <span th:text="${tarea.vars['telefono']?.value}"></span></div>
                <div class="col-12 mb-1"><strong>Direcci√≥n:</strong> <span th:text="${tarea.vars['direccionResidencia']?.value}"></span></div>

                <div class="col-12 border-bottom pb-2 mb-2 mt-3 text-muted fw-bold">Informaci√≥n del Proyecto</div>
                <div class="col-12 mb-1"><strong>Proyecto:</strong> <span th:text="${tarea.vars['nombreProyecto']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Sector:</strong> <span th:text="${tarea.vars['sectorProyecto']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Valor:</strong> $<span th:text="${tarea.vars['valorProyecto']?.value}"></span></div>
                <div class="col-md-6 mb-1"><strong>Ubicaci√≥n:</strong> <span th:text="${tarea.vars['municipioProyecto']?.value} + ', ' + ${tarea.vars['departamentoProyecto']?.value}"></span></div>

                <div class="col-12 mt-2 bg-white p-2 rounded border">
                    <strong>üìÇ Soporte EIA:</strong> <span th:text="${tarea.vars['nombreSoporteEIA']?.value}" class="text-primary"></span>
                </div>
            </div>
        </div>
    </div>

    <label class="fw-bold">Observaciones / Motivo de Devoluci√≥n</label>
    <textarea name="observacionDatosIniciales" class="form-control mb-3" placeholder="Si devuelve la solicitud, explique aqu√≠ las correcciones necesarias..."></textarea>

    <div class="d-grid gap-2">
        <button type="submit" name="solicitudValida" value="true" class="btn btn-success">‚úÖ Datos Correctos</button>
        <button type="submit" name="solicitudValida" value="false" class="btn btn-danger">‚ùå Datos Incorrectos (Devolver)</button>
    </div>
</div>

<div th:fragment="Activity_0mt96ax">
    <div class="alert alert-info small mb-3">
        <strong>Proyecto:</strong> <span th:text="${tarea.vars['nombreProyecto']?.value}"></span><br>
        <strong>Municipio:</strong> <span th:text="${tarea.vars['municipioProyecto']?.value}"></span>
    </div>
    <label class="fw-bold">Profesional Encargado</label>
    <select name="profesionalAsignado" class="form-select mb-3">
        <option value="Pedro P√©rez (Bi√≥logo)">Pedro P√©rez (Bi√≥logo)</option>
        <option value="Ana Garc√≠a (Ing. Ambiental)">Ana Garc√≠a (Ing. Ambiental)</option>
        <option value="Carlos Ruiz (Ge√≥logo)">Carlos Ruiz (Ge√≥logo)</option>
    </select>
    <button type="submit" class="btn btn-primary w-100">Asignar</button>
</div>

<div th:fragment="Activity_1dwso6r">
    <div class="card bg-light mb-3">
        <div class="card-body small">
            <strong>Ubicaci√≥n:</strong> <span th:text="${tarea.vars['municipioProyecto']?.value}"></span> - <span th:text="${tarea.vars['direccionResidencia']?.value}"></span><br>
            <strong>Profesional Asignado:</strong> <span th:text="${tarea.vars['profesionalAsignado']?.value}"></span>
        </div>
    </div>

    <label class="fw-bold">Lugar Visitado</label>
    <input type="text" name="LugarVisita" class="form-control mb-2" required>
    <label class="fw-bold">Fecha Realizaci√≥n</label>
    <input type="date" name="FechaVisita" class="form-control mb-2" required>
    <label class="fw-bold">Concepto Preliminar</label>
    <textarea name="Observaciones" class="form-control mb-3"></textarea>
    <div class="d-grid gap-2">
        <button type="submit" name="TodoCorrecto" value="true" class="btn btn-success">üëç Concepto Favorable</button>
        <button type="submit" name="TodoCorrecto" value="false" class="btn btn-danger">üëé Desfavorable (Rechazar)</button>
    </div>
</div>

<div th:fragment="Activity_0qtkyf2">
    <label class="fw-bold">Dictamen T√©cnico Detallado</label>
    <textarea name="dictamenTecnico" class="form-control mb-3" rows="5" placeholder="Conclusiones de la evaluaci√≥n ambiental..."></textarea>
    <button type="submit" class="btn btn-primary w-100">Radicar Concepto</button>
</div>

<div th:fragment="Activity_0vzruom">
    <div class="card bg-white border-primary mb-3 text-center">
        <div class="card-body">
            <small class="text-muted">Referencia reportada por el ciudadano:</small>
            <h4 class="text-primary my-2" th:text="${tarea.vars['ReferenciaPagoLicencia']?.value}">Sin referencia</h4>
            <span class="badge bg-success">Valor a verificar: 5.000.000 (Simulado)</span>
        </div>
    </div>
    <label class="fw-bold">¬øPago verificado en bancos?</label>
    <div class="d-grid gap-2 mt-2">
        <button type="submit" name="PagoCorrecto" value="true" class="btn btn-success">üí∞ Pago Recibido</button>
        <button type="submit" name="PagoCorrecto" value="false" class="btn btn-danger">üö´ No Pag√≥ (Rechazar)</button>
    </div>
</div>

<div th:fragment="Activity_1gpd4pm">
    <div class="alert alert-secondary small">
        Base Legal: Ley 99 de 1993.<br>
        Solicitante: <span th:text="${tarea.vars['nombreSolicitante']?.value}"></span>
    </div>
    <label class="fw-bold">Texto de la Resoluci√≥n</label>
    <textarea name="textoResolucion" class="form-control mb-3" rows="4">Resuelve: Otorgar Licencia Ambiental para el proyecto...</textarea>
    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="resolucionTramiteCompleto" value="true" checked>
        <label class="form-check-label">Tr√°mite Legal Completo</label>
    </div>
    <button type="submit" class="btn btn-dark w-100">Emitir Resoluci√≥n</button>
</div>

<div th:fragment="Activity_0zhmpvm">
    <div class="alert alert-warning">
        Est√° a punto de otorgar licencia ambiental al proyecto:
        <strong th:text="${tarea.vars['nombreProyecto']?.value}"></strong>.
    </div>
    <label class="fw-bold">N√∫mero de Radicado Final (VITAL)</label>
    <input type="text" name="RadicadoLicencia" class="form-control mb-3" placeholder="Ej: CORMA-LIC-2025-001" required>
    <button type="submit" class="btn btn-success w-100">‚úíÔ∏è Firmar y Otorgar</button>
</div>

</body>
</html>